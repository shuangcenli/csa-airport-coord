(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{243:function(e,t,a){e.exports=a(445)},253:function(e,t,a){},443:function(e,t,a){e.exports=a.p+"static/media/airpick_guide.4b35761e.pdf"},444:function(e,t,a){e.exports=a.p+"static/media/CSA logo.9899b8fd.png"},445:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),i=a.n(l),s=a(85),o=a(230),c=a(11),u=a(72),m=(a(253),a(69),a(20)),d=a(21),p=a.n(d);m.a.config({top:50,maxCount:1}),p.a.interceptors.request.use((function(e){return m.a.loading("loading",0),e})),p.a.interceptors.response.use((function(e){return m.a.destroy(),e}));var f=a(152),h=a(5),E={redirectTo:"",msg:"",username:"",isAuth:void 0};var g=function(e){var t=e.pwd,a=Object(f.a)(e,["pwd"]);return console.log(t),{type:"AUTH_SUCC",payload:a}};function b(e){return m.a.error(e),{msg:e,type:"ERROR_MSG"}}function y(e){return{type:"LOAD_DATA",payload:e}}var v=a(32),O=a.n(v),k={msg:"",redirectTo:"",username:"",myRequests:[],list:[]};function C(e){return m.a.error(e),{type:"ERROR_SUBMIT",msg:e}}var w=function(e){var t=e.date+" "+e.time,a=O.a.tz(t,"America/New_York");return{published:e.publish,airport:e.airport,arrivalTime:a,carryon:e.carryon,luggage:e.luggage,notes:e.notes}};function D(e){return function(t){return p.a.get("/api/requests/user/".concat(e)).then((function(e){return t({type:"LOAD_REQ",payload:e.data.data})}))}}function j(e,t){return function(a){return p.a.delete("/api/requests/request/".concat(e)).then((function(e){200===e.status&&0===e.data.code?(a({type:"DELETE_SUC",msg:"delete successfully"}),a(D(t))):a(C("Error happened when deleting this record!"))}))}}var q=function(e){return function(t){return p.a.get("/api/requests/volunteer/".concat(e)).then((function(e){var a,n;200===e.status&&t((a=e.data.msg,n=e.data.acceptedList,{type:"LOAD_ACCEPTED_AIR_SUC",msg:a,acceptedList:n}))}))}},I={msg:"",redirectTo:"",username:"",lodgeRequests:[],list:[]};function A(e){return m.a.error(e),{type:"ERROR_LODGE_SUBMIT",msg:e}}var S=function(e){return{published:e.publish,pickupLocation:e.pickupLocation,startDate:O()(e.startDate).tz("America/New_York"),leaveDate:O()(e.leaveDate).tz("America/New_York"),notes:e.notes}};function R(e){return function(t){return p.a.get("/api/lodgeRequests/lodge/".concat(e)).then((function(e){return t({type:"LOAD_LODGE",payload:e.data.data})}))}}function N(e,t){return function(a){return p.a.delete("/api/lodgeRequests/request/lodge/".concat(e)).then((function(e){200===e.status&&0===e.data.code?(a({type:"DELETE_LODGE_SUC",msg:"delete successfully"}),a(R(t))):a(A("Error happened when deleting this record!"))}))}}var x,L,P,T,_,Y=function(e){return function(t){return p.a.get("/api/lodgeRequests/volunteer2/".concat(e)).then((function(e){var a,n;200===e.status&&t((a=e.data.msg,n=e.data.acceptedList,{type:"LOAD_ACCEPTED_LODGE_SUC",msg:a,acceptedList:n}))}))}},M=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATA":return Object(h.a)({},e,{},t.payload,{isAuth:!0});case"AUTH_SUCC":return Object(h.a)({},e,{msg:""},t.payload,{isAuth:!0,redirectTo:"/"});case"ERROR_MSG":return Object(h.a)({},e,{isAuth:!1,msg:t.msg});case"LOGOUT":return Object(h.a)({},E);default:return e}},airpick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ALL":return Object(h.a)({},e,{list:t.payload,msg:t.msg});case"LOAD_REQ":return Object(h.a)({},e,{myRequests:t.payload});case"ERROR_SUBMIT":return Object(h.a)({},e,{msg:t.msg});case"ADD_SUC":return Object(h.a)({},e,{myRequests:t.payload});case"UPDATE_SUC":return Object(h.a)({},e,{msg:t.msg,myRequests:t.payload,redirectTo:"/myrequest"});case"DELETE_SUC":return Object(h.a)({},e,{msg:t.msg});case"ACCEPT_REQ_SUC":return Object(h.a)({},e,{msg:t.msg,list:t.payload});case"LOAD_ACCEPTED_AIR_SUC":return Object(h.a)({},e,{msg:t.msg,acceptedAirPick:t.acceptedList});default:return e}},lodge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LODGE_ALL":return Object(h.a)({},e,{list:t.payload,msg:t.msg});case"LOAD_LODGE":return Object(h.a)({},e,{lodgeRequests:t.payload});case"ERROR_LODGE_SUBMIT":return Object(h.a)({},e,{msg:t.msg});case"ADD_LODGE_SUC":return Object(h.a)({},e,{lodgeRequests:t.payload});case"UPDATE_LODGE_SUC":return Object(h.a)({},e,{msg:t.msg,lodgeRequests:t.payload,redirectTo:"/myrequest"});case"DELETE_LODGE_SUC":return Object(h.a)({},e,{msg:t.msg});case"ACCEPT_LODGE_REQ_SUC":return Object(h.a)({},e,{msg:t.msg,list:t.payload});case"LOAD_ACCEPTED_LODGE_SUC":return Object(h.a)({},e,{msg:t.msg,acceptedLodge:t.acceptedList});default:return e}}}),F=a(13),V=a(14),U=a(16),z=a(15),G=a(17),H=a(89),W=(a(62),a(30)),Q=(a(316),a(155)),B=(a(318),a(60)),J=a(234),$=a.n(J),X=B.a.Item,Z=B.a.SubMenu,K=(x=Object(c.b)((function(e){return e}),{logoutRedux:function(){return{type:"LOGOUT"}}}),Object(H.h)(L=x(L=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).updateWindowSize=function(e){a.setState(Object(h.a)({},a.state,{screenWidth:e.target.innerWidth}))},a.handleOk=function(){a.setState({modalVisible:!1}),$.a.erase("userid"),a.props.history.push("/login"),a.props.logoutRedux()},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleUserCenter=function(e){return e.map((function(e){return"Sign out"!==e.text?r.a.createElement(X,{key:e.text,onClick:function(){return a.props.history.push(e.path)}},e.text):r.a.createElement(X,{key:"logout",onClick:function(){return a.logout()}},"Sign out")}))},a.state={modalVisible:!1,screenWidth:window.innerWidth,location:a.props.location.pathname},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.setState({location:this.props.location.pathname}),window.addEventListener("resize",this.updateWindowSize.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeAllListener("resize")}},{key:"logout",value:function(){this.setState({modalVisible:!0})}},{key:"render",value:function(){var e=this,t=null;this.props.location&&(t=function e(t,a){for(var n=0;n<t.length;n++){var r=t[n];if(r.subItem){var l=e(r.subItem,a);if(l)return l}}return t.filter(a)[0]}(this.props.data,(function(t){return t.path===e.props.location.pathname})));var a=this.props.data.filter((function(e){return!e.hide})),n=this.props.user.displayName;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(B.a,{mode:"horizontal",selectedKeys:t?[t.text]:[]},a.map((function(t){if("Sign out"!==t.text&&"No match"!==t.text&&"Volunteer"!==t.text&&"usercenter"!==t.text)return r.a.createElement(X,{key:t.text,className:t.className,onClick:function(){return e.props.history.push(t.path)}},t.text);if("Volunteer"===t.text){var a=t.subItem;return r.a.createElement(Z,{key:t.text,title:t.text},a.map((function(t){return r.a.createElement(X,{key:t.text,onClick:function(){return e.props.history.push(t.path)}},t.text)})))}return"usercenter"===t.text?e.state.screenWidth>=560?r.a.createElement(Z,{key:t.text,className:t.className,title:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{style:{verticalAlign:"middle"}},n.charAt(0)),"\xa0 \xa0",n)},e.handleUserCenter(t.subItem)):e.state.screenWidth>=477?r.a.createElement(Z,{key:t.text,className:t.className,title:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{style:{verticalAlign:"middle"}},n.charAt(0)))},t.subItem.map((function(e){return r.a.createElement(X,{key:e.text},e.text)}))):r.a.createElement(Z,{key:t.text,title:r.a.createElement("div",{style:{marginLeft:0,marginRight:15}},r.a.createElement(Q.a,{style:{verticalAlign:"middle"}},n.charAt(0)),"\xa0 ",n)},t.subItem.map((function(e){return r.a.createElement(X,{key:e.text},e.text)}))):null}))),r.a.createElement(W.a,{title:"Log out?",visible:this.state.modalVisible,onOk:this.handleOk,onCancel:this.handleCancel},"Are you sure you want to log out?")))}}]),t}(r.a.Component))||L)||L),ee=(a(45),a(9)),te=(a(81),a(3)),ae=(a(70),a(18)),ne=(a(71),a(27)),re=a(455),le=a(456),ie=ne.a.Paragraph,se=Object(c.b)((function(e){return e.user}),{login:function(e){var t=e.input,a=e.pwd;return t&&a?function(e){return p.a.post("/api/user/login",{input:t,pwd:a}).then((function(t){if(200!==t.status||0!==t.data.code)throw e(b(t.data.msg)),new Error("Failed to authenticate this user!");e(g(t.data.data))}))}:b("missing fields!")},loadPickreq:D})(P=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(l)))).formRef=r.a.createRef(),a.onFinish=function(e){a.props.login(e).then((function(){a.props.loadPickreq(a.props.username)})).catch()},a.onFinishFailed=function(e){var t=e.errorFields;a.formRef.current.scrollToField(t[0].name)},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.redirectTo?r.a.createElement(H.a,{to:this.props.redirectTo}):null,r.a.createElement(ie,{className:"title-middle"},r.a.createElement("h3",null,"Log in to AirPick")),r.a.createElement(ie,null,r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:10}}},{ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,name:"login"}),r.a.createElement(te.a.Item,{name:"input",label:"Username or Email",rules:[{required:!0,message:"Please input your username or e-mail!"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(re.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username or Email"})),r.a.createElement(te.a.Item,{name:"pwd",label:"Password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(le.a,{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),r.a.createElement(te.a.Item,{wrapperCol:{xs:{span:18,offset:0},sm:{span:10,offset:8}}},r.a.createElement(ee.a,{type:"primary",htmlType:"submit"},"Log in"),"\xa0 Or ",r.a.createElement("a",{href:"/register"},"register now!")))))}}]),t}(r.a.Component))||P,oe=(a(132),a(42)),ce=(a(110),a(47)),ue=(a(133),a(22)),me=(a(219),a(88)),de=a(119),pe=a.n(de),fe=(a(134),ne.a.Paragraph),he=Object(c.b)((function(e){return e.user}),{register:function(e){var t=e.email,a=e.firstName,n=e.lastName,r=e.pwd,l=e.confirm,i=e.gender,s=e.wechatId,o=e.username;if(!t||!a||!n||!r||r!==l||!i||!s||!o)return b("missing fields!");var c=[a,n].join(" "),u=Object(h.a)({},e,{displayName:c});return function(e){p.a.post("/api/user/register",u).then((function(t){200===t.status&&0===t.data.code?e(g(t.data.data)):e(b(t.data.msg))}))}}})(T=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).handleEmailChange=function(e){var t=e.target.value;/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.[a-zA-Z]{2,4}$/.test(t)?a.setState({emailValid:!0}):a.setState({emailValid:!1})},a.handleSendButton=function(){var e;return pe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.formRef.current.getFieldValue("email"),p.a.get("/api/user/emailVeriCode?email=".concat(e)).then((function(e){if(0===e.data.code){m.a.success(e.data.msg),a.setState({codeResendLoading:!0});var t=setInterval((function(){a.setState((function(e){return e.codeResendCoolTime<=1?(clearInterval(t),{codeResendLoading:!1,codeResendCoolTime:30}):{codeResendCoolTime:e.codeResendCoolTime-1}}))}),1e3)}else 2===e.data.code?m.a.warning(e.data.msg):m.a.error(e.data.msg)})).catch((function(e){m.a.error(e.response)}));case 2:case"end":return t.stop()}}))},a.onFinish=function(e){a.props.register(e)},a.onFinishFailed=function(e){var t=e.errorFields;a.formRef.current.scrollToField(t[0].name)},a.emailValidator=function(e,t){return!t||/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.[a-zA-Z]{2,4}$/.test(t)?Promise.resolve():Promise.reject("Please enter a valid email address!")},a.phoneValidator=function(e,t){return!t||!t.length||/^\d+$/.test(t)&&10===t.length?Promise.resolve():Promise.reject("Invalid US Phone Number!")},a.compareToFirstPassword=function(e,t){return t&&t!==a.formRef.current.getFieldValue("pwd")?Promise.reject("Two passwords that you enter is inconsistent!"):Promise.resolve()},a.state={confirmDirty:!1,emailValid:!1,codeResendLoading:!1,codeResendCoolTime:30},a.formRef=r.a.createRef(),a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.redirectTo?r.a.createElement(H.a,{to:this.props.redirectTo}):null,r.a.createElement(fe,{className:"title-middle"},r.a.createElement("h3",null,"Register")),r.a.createElement(fe,null,r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:18},sm:{span:8}},wrapperCol:{xs:{span:18},sm:{span:10}}},{ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,name:"register"}),r.a.createElement(te.a.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input your username"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(re.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username or Email"})),r.a.createElement(te.a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,message:"Please input your first name!"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(re.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"First Name"})),r.a.createElement(te.a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,message:"Please input your last name!"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(re.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Last Name"})),r.a.createElement(te.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,message:"Please input your E-mail!"},{validator:this.emailValidator}]},r.a.createElement(ae.a,{onChange:this.handleEmailChange})),r.a.createElement(te.a.Item,{name:"pwd",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(ae.a.Password,null)),r.a.createElement(te.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["pwd"],rules:[{required:!0,message:""},{validator:this.compareToFirstPassword}],hasFeedback:!0},r.a.createElement(ae.a.Password,null)),r.a.createElement(te.a.Item,{name:"gender",label:"Gender",rules:[{required:!0,message:"Please choose your gender!"}]},r.a.createElement(me.a.Group,null,r.a.createElement(me.a,{value:"male"},"Male"),r.a.createElement(me.a,{value:"female"},"Female"))),r.a.createElement(te.a.Item,{name:"wechatId",label:"Wechat ID",rules:[{required:!0,message:"Please input your wechat ID!"}]},r.a.createElement(ae.a,{placeholder:"wechat"})),r.a.createElement(te.a.Item,{name:"phone",label:"US Phone Number",rules:[{validator:this.phoneValidator}]},r.a.createElement(ae.a,{type:"String",placeholder:"US Phone Number"})),r.a.createElement(te.a.Item,{label:"Verify Email"},r.a.createElement(oe.a,{gutter:8},r.a.createElement(ue.a,{span:16},r.a.createElement(te.a.Item,{name:"code",noStyle:!0,rules:[{required:!0,message:"Please input the email verification code you got!"}]},r.a.createElement(ae.a,null))),r.a.createElement(ue.a,{span:6},this.state.emailValid?r.a.createElement(ce.a,{title:"Click to get the verification code in your email"},r.a.createElement(ee.a,{disabled:!this.state.emailValid||this.state.codeResendLoading,onClick:this.handleSendButton},this.state.codeResendLoading?this.state.codeResendCoolTime+"s":"Get Code")):r.a.createElement(ce.a,{title:"Enter a valid email address and get a verification code"},r.a.createElement(ee.a,{disabled:!this.state.emailValid,onClick:this.handleSendButton},"Get Code"))))),r.a.createElement(te.a.Item,{wrapperCol:{xs:{span:18,offset:0},sm:{span:10,offset:8}}},r.a.createElement(ee.a,{type:"primary",htmlType:"submit"},"Register"),"\xa0 Already have an account? ",r.a.createElement("a",{href:"/login"},"Log in")))))}}]),t}(r.a.Component))||T,Ee=(a(113),a(65)),ge=a(463),be=(a(220),a(106)),ye=(a(221),a(148)),ve=(a(114),a(52)),Oe=a(39),ke=a.n(Oe),Ce=ae.a.TextArea,we=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(l)))).formRef=r.a.createRef(),a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,l=t.onCreate,i={rules:[{required:!0,message:"Please fill this field!"}]};return r.a.createElement("div",null,r.a.createElement(W.a,{width:700,visible:a,title:"Add New Pickup Request",onOk:function(){var t=e.formRef.current;t.validateFields().then((function(e){t.resetFields(),l(e)})).catch((function(e){console.log("Update failed:",e)}))},onCancel:n},r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:20},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:10}}},{ref:this.formRef}),r.a.createElement(te.a.Item,{label:"Date",name:"date",rules:i.rules},r.a.createElement(ve.a,{disabledDate:function(e){return e&&e<ke()().endOf("day")},format:"YYYY-MM-DD"})),r.a.createElement(te.a.Item,{label:"Time",name:"time",rules:i.rules},r.a.createElement(ye.a,{autoFocus:!0,format:"HH:mm"})),r.a.createElement(te.a.Item,{label:"Airport/Location",name:"airport",rules:i.rules},r.a.createElement(ae.a,{placeholder:"MCO"})),r.a.createElement(te.a.Item,{label:"Number of Carry-ons",name:"carryon",rules:i.rules},r.a.createElement(be.a,{min:0,max:10,placeholder:2})),r.a.createElement(te.a.Item,{label:"Number of large luggages",name:"luggage",rules:i.rules},r.a.createElement(be.a,{min:0,max:10,placeholder:2})),r.a.createElement(te.a.Item,{label:"Notes",name:"notes"},r.a.createElement(Ce,{placeholder:"How many people coming with you?"})))))}}]),t}(r.a.Component),De=ae.a.TextArea,je=function(e){function t(){var e;return Object(F.a)(this,t),(e=Object(U.a)(this,Object(z.a)(t).call(this))).lodgeFormRef=r.a.createRef(),e.state={startDate:null},e}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,l=t.onCreate,i={rules:[{required:!0,message:"Please fill this field!"}]};return r.a.createElement("div",null,r.a.createElement(W.a,{width:700,visible:a,title:"Add New Lodge Request",onOk:function(){var t=e.lodgeFormRef.current;t.validateFields().then((function(e){t.resetFields(),l(e)})).catch((function(e){console.log("Update failed:",e)}))},onCancel:n},r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:20},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:10}}},{ref:this.lodgeFormRef}),r.a.createElement(te.a.Item,{label:"Start Date",name:"startDate",rules:i.rules},r.a.createElement(ve.a,{disabledDate:function(e){return e&&e<ke()().endOf("day")},format:"YYYY-MM-DD",onChange:function(t){return e.setState({startDate:t})}})),r.a.createElement(te.a.Item,{label:"Leave Date",name:"leaveDate",rules:i.rules},r.a.createElement(ve.a,{disabledDate:function(t){return e.state.startDate?t&&t<e.state.startDate.endOf("day"):t&&t<ke()(new Date).tz("America/New_York").endOf("day")},format:"YYYY-MM-DD"})),r.a.createElement(te.a.Item,{label:"Pick-up location",name:"pickupLocation",rules:i.rules},r.a.createElement(ae.a,{placeholder:"GNV"})),r.a.createElement(te.a.Item,{label:"Notes",name:"notes"},r.a.createElement(De,{placeholder:"How many people coming with you?"})))))}}]),t}(r.a.Component),qe=(a(229),a(150)),Ie=(a(104),a(40)),Ae=a(459),Se=a(460),Re=a(461),Ne=a(462),xe=ae.a.TextArea,Le=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(l)))).formRef=r.a.createRef(),a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,l=t.onCreate,i=t.data,s={rules:[{required:!0,message:"Please fill this field!"}]};return r.a.createElement("div",null,i?r.a.createElement(W.a,{width:700,visible:a,title:"Update Pickup Request",onOk:function(){var t=e.formRef.current;t.validateFields().then((function(e){t.resetFields(),l(e,i.key)})).catch((function(e){console.log("Update failed:",e)}))},onCancel:n},r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:20},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:10}}},{initialValues:{date:O()(i.arrivalTime).tz("America/New_York"),time:O()(i.arrivalTime).tz("America/New_York"),airport:i.airport,carryon:i.carryon,luggage:i.luggage,notes:i.notes},ref:this.formRef}),r.a.createElement(te.a.Item,{label:"Date",name:"date",rules:s.rules},r.a.createElement(ve.a,{disabledDate:function(e){return e&&e<O()().endOf("day")},format:"YYYY-MM-DD"})),r.a.createElement(te.a.Item,{label:"Time",name:"time",rules:s.rules},r.a.createElement(ye.a,{format:"HH:mm"})),r.a.createElement(te.a.Item,{label:"Airport/Location",name:"airport",rules:s.rules},r.a.createElement(ae.a,{placeholder:"MCO"})),r.a.createElement(te.a.Item,{label:"Number of Carry-ons",name:"carryon",rules:s.rules},r.a.createElement(be.a,{min:0,max:10,placeholder:2})),r.a.createElement(te.a.Item,{label:"Number of large luggages",name:"luggage",rules:s.rules},r.a.createElement(be.a,{min:0,max:10,placeholder:2})),r.a.createElement(te.a.Item,{label:"Notes",name:"notes"},r.a.createElement(xe,{placeholder:"How many people coming with you?"})))):null)}}]),t}(r.a.Component),Pe=function(e){var t=e.visible,a=e.volunteerInfo,n=e.onCancel,l=e.onOk,i={fontSize:16},s=[0,5];return r.a.createElement("div",null,a?r.a.createElement(W.a,{width:550,visible:t,title:"Your Volunteer Information",onCancel:n,onOk:l},r.a.createElement(oe.a,{gutter:s},r.a.createElement(ue.a,{span:4,style:i},"Name"),r.a.createElement(ue.a,{span:14,style:i,offset:4},a.displayName)),r.a.createElement(oe.a,{gutter:s},r.a.createElement(ue.a,{span:4,style:i},"E-mail"),r.a.createElement(ue.a,{span:14,style:i,offset:4},a.email)),r.a.createElement(oe.a,{gutter:s},r.a.createElement(ue.a,{span:4,style:i},"Wechat"),r.a.createElement(ue.a,{span:14,style:i,offset:4},a.wechatId)),r.a.createElement(oe.a,{gutter:s},r.a.createElement(ue.a,{span:4,style:i},"US Phone"),r.a.createElement(ue.a,{span:14,style:i,offset:4},a.phone))):null)},Te=a(458);function _e(e){var t=e.isAirpick,a=e.reqID,n=e.username,l=e.visible,i=e.closeModal,s=Object(c.c)();return r.a.createElement("div",null,a?r.a.createElement(W.a,{visible:l,title:"Deleting request",onOk:function(){t?s(j(a,n)).then((function(){})):s(N(a,n)).then((function(){})),i()},onCancel:function(){i()}},r.a.createElement("p",null,r.a.createElement(Te.a,null)," Are you sure you want to delete this request? This operation cannot be undo. Your request will be permanently deleted.")):null)}var Ye,Me,Fe,Ve,Ue,ze,Ge=Ie.a.Column,He=qe.a.Step,We=Object(c.b)((function(e){return e}),{updatePickreq:function(e,t){if(!e.airport||!e.date||!e.time||null==e.publish)return C("Missing key fields!");var a=e.username,n=w(e);return function(e){return p.a.put("/api/requests/user/".concat(a),{request:n,reqId:t}).then((function(t){200===t.status&&0===t.data.code?e(function(e){return{type:"UPDATE_SUC",msg:"Update Successfully!",payload:e}}(t.data.data)):e(C("Error happened when update!"))}),(function(t){e(C("Error happened when update!"))}))}},deletePickreq:j,loadPickreq:D})(_=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).handleEdit=function(e){a.setState(Object(h.a)({},a.state,{visible:!0,data:e}))},a.handleDelete=function(e){a.setState(Object(h.a)({},a.state,{deleteModalVisible:!0,deleteReqID:e.key}))},a.handleSubmit=function(e,t){a.setState({visible:!1,data:null,loading:!0});var n=Object(h.a)({},e,{publish:!0,notes:e.notes?e.notes:"",date:e.date.format("YYYY-MM-DD"),time:e.time.format("HH:mm"),username:a.props.user.username});a.props.updatePickreq(n,t).then((function(){return a.setState(Object(h.a)({},a.state,{loading:!1}))}))},a.handleCancel=function(){a.setState({visible:!1,data:null})},a.updateForm=function(e){a.formRef=e},a.showVolunteerInfo=function(e){a.setState(Object(h.a)({},a.state,{volunteerInfoVisible:!0,volunteerInfo:e}))},a.closeVolunteerModal=function(){a.setState(Object(h.a)({},a.state,{volunteerInfoVisible:!1}))},a.closeDeleteModal=function(){a.setState(Object(h.a)({},a.state,{deleteModalVisible:!1,deleteReqID:null}))},a.state={loading:!1,visible:!1,volunteerInfoVisible:!1,deleteModalVisible:!1},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.map((function(e){return{key:e._id,date:O()(e.arrivalTime).tz("America/New_York").format("YYYY-MM-DD"),time:O()(e.arrivalTime).tz("America/New_York").format("HH:mm"),arrivalTime:e.arrivalTime,airport:e.airport,volunteer:e.volunteer,published:e.published,carryon:e.carryon,luggage:e.luggage,notes:e.notes}}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Ie.a,{dataSource:t,loading:this.state.loading,pagination:!1},r.a.createElement(Ge,{title:"Date",dataIndex:"date",key:"date"}),r.a.createElement(Ge,{title:"Time",dataIndex:"time",key:"time"}),r.a.createElement(Ge,{title:"Airport",dataIndex:"airport",key:"airport"}),r.a.createElement(Ge,{title:"Action",key:"action",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(ce.a,{title:"Edit"},r.a.createElement(ee.a,{type:"default",icon:r.a.createElement(Ae.a,null),shape:"circle",style:{marginRight:10},onClick:function(){return e.handleEdit(a)}})),r.a.createElement(ce.a,{title:"Delete"},r.a.createElement(ee.a,{type:"danger",icon:r.a.createElement(Se.a,null),shape:"circle",onClick:function(){return e.handleDelete(a)}})))}}),r.a.createElement(Ge,{title:"Status",key:"status",render:function(t,a){var n=a.volunteer?2:a.published?1:0;return 0===n?r.a.createElement(He,{status:"finish",title:"trip finished!",icon:r.a.createElement(Re.a,{twoToneColor:"#52c41a"})}):1===n?r.a.createElement(He,{status:"process",title:"Looking for volunteers..",icon:r.a.createElement(Ne.a,null)}):r.a.createElement(ee.a,{type:"primary",onClick:function(){return e.showVolunteerInfo(a.volunteer)}},"Show Volunteer Info")}})),r.a.createElement(Le,{wrappedComponentRef:this.updateForm,visible:this.state.visible,onCreate:this.handleSubmit,onCancel:this.handleCancel,data:this.state.data}),r.a.createElement(Pe,{visible:this.state.volunteerInfoVisible,volunteerInfo:this.state.volunteerInfo,onCancel:this.closeVolunteerModal,onOk:this.closeVolunteerModal}),r.a.createElement(_e,{visible:this.state.deleteModalVisible,reqID:this.state.deleteReqID,username:this.props.user.username,isAirpick:!0,closeModal:this.closeDeleteModal})))}}]),t}(r.a.Component))||_,Qe=ae.a.TextArea,Be=function(e){function t(){var e;return Object(F.a)(this,t),(e=Object(U.a)(this,Object(z.a)(t).call(this))).lodgeFormRef=r.a.createRef(),e.state={startDate:null},e}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.lodgeData&&!e.lodgeData&&this.setState({startDate:ke()(this.props.lodgeData.startDate).tz("America/New_York")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.lodgeVisible,n=t.onCancel,l=t.onCreate,i=t.lodgeData,s={rules:[{required:!0,message:"Please fill this field!"}]};return r.a.createElement("div",null,i?r.a.createElement(W.a,{width:700,visible:a,title:"Update New Lodge Request",onOk:function(){var t=e.lodgeFormRef.current;t.validateFields().then((function(e){t.resetFields(),l(e,i.key)})).catch((function(e){console.log("Update lodge failed:",e)}))},onCancel:n},r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:20},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:10}}},{initialValues:{startDate:ke()(i.startDate).tz("America/New_York"),leaveDate:ke()(i.leaveDate).tz("America/New_York"),pickupLocation:i.pickupLocation,notes:i.notes},ref:this.lodgeFormRef}),r.a.createElement(te.a.Item,{label:"Start Date",name:"startDate",rules:s.rules},r.a.createElement(ve.a,{disabledDate:function(e){return e&&e<ke()().endOf("day")},format:"YYYY-MM-DD",onChange:function(t){return e.setState({startDate:t})}})),r.a.createElement(te.a.Item,{label:"Leave Date",name:"leaveDate",rules:s.rules},r.a.createElement(ve.a,{disabledDate:function(t){return t&&t<e.state.startDate.endOf("day")},format:"YYYY-MM-DD"})),r.a.createElement(te.a.Item,{label:"Pick-up location",name:"pickupLocation",rules:s.rules},r.a.createElement(ae.a,{placeholder:"GNV"})),r.a.createElement(te.a.Item,{label:"Notes",name:"notes"},r.a.createElement(Qe,{placeholder:"How many people coming with you?"})))):null)}}]),t}(r.a.Component),Je=Ie.a.Column,$e=qe.a.Step,Xe=Object(c.b)((function(e){return e}),{updateLodgereq:function(e,t){if(!e.pickupLocation||!e.startDate||!e.leaveDate)return A("Missing key fields!");var a=e.username,n=S(e);return function(e){return p.a.put("/api/requests/lodge/".concat(a),{request:n,reqId:t}).then((function(t){200===t.status&&0===t.data.code?e(function(e){return{type:"UPDATE_LODGE_SUC",msg:"Update Successfully!",payload:e}}(t.data.data)):e(A("Error happened when update!"))}),(function(t){e(A("Error happened when update!"))}))}},deleteLodgereq:N,loadLodgereq:R})(Ye=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).handleEdit=function(e){a.setState(Object(h.a)({},a.state,{lodgeVisible:!0,lodgeData:e}))},a.handleDelete=function(e){a.setState(Object(h.a)({},a.state,{deleteModalVisible:!0,deleteReqID:e.key}))},a.handleSubmit=function(e,t){a.setState({lodgeVisible:!1,lodgeData:null,loading:!0});var n=Object(h.a)({},e,{publish:!0,notes:e.notes?e.notes:"",startDate:e.startDate.format("YYYY-MM-DD"),leaveDate:e.leaveDate.format("YYYY-MM-DD"),username:a.props.user.username});a.props.updateLodgereq(n,t).then((function(){return a.setState(Object(h.a)({},a.state,{loading:!1}))}))},a.handleCancel=function(){a.setState(Object(h.a)({},a.state,{lodgeVisible:!1,lodgeData:null}))},a.updateForm=function(e){a.formRef=e},a.showVolunteerInfo=function(e){a.setState(Object(h.a)({},a.state,{volunteerInfoVisible:!0,volunteerInfo:e}))},a.closeVolunteerModal=function(){a.setState({volunteerInfoVisible:!1})},a.closeDeleteModal=function(){a.setState(Object(h.a)({},a.state,{deleteModalVisible:!1,deleteReqID:null}))},a.state={loading:!1,lodgeVisible:!1,volunteerInfoVisible:!1,deleteModalVisible:!1},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props.lodgeData.map((function(e){return{key:e._id,startDate:O()(e.startDate).tz("America/New_York").format("YYYY-MM-DD"),leaveDate:O()(e.leaveDate).tz("America/New_York").format("YYYY-MM-DD"),pickupLocation:e.pickupLocation,volunteer:e.volunteer,published:e.published,notes:e.notes}}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Ie.a,{dataSource:t,loading:this.state.loading,pagination:!1},r.a.createElement(Je,{title:"Start Date",dataIndex:"startDate",key:"startDate"}),r.a.createElement(Je,{title:"Leave Date",dataIndex:"leaveDate",key:"leaveDate"}),r.a.createElement(Je,{title:"Pickup Location",dataIndex:"pickupLocation",key:"pickupLocation"}),r.a.createElement(Je,{title:"Action",key:"action",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(ce.a,{title:"Edit"},r.a.createElement(ee.a,{type:"default",icon:r.a.createElement(Ae.a,null),shape:"circle",style:{marginRight:10},onClick:function(){return e.handleEdit(a)}})),r.a.createElement(ce.a,{title:"Delete"},r.a.createElement(ee.a,{type:"danger",icon:r.a.createElement(Se.a,null),shape:"circle",onClick:function(){return e.handleDelete(a)}})))}}),r.a.createElement(Je,{title:"Status",key:"status",render:function(t,a){var n=a.volunteer?2:a.published?1:0;return 0===n?r.a.createElement($e,{status:"finish",title:"trip finished!",icon:r.a.createElement(Re.a,{twoToneColor:"#52c41a"})}):1===n?r.a.createElement($e,{status:"process",title:"Looking for volunteers..",icon:r.a.createElement(Ne.a,null)}):r.a.createElement(ee.a,{type:"primary",onClick:function(){return e.showVolunteerInfo(a.volunteer)}},"Show Volunteer Info")}})),r.a.createElement(Be,{wrappedComponentRef:this.updateForm,lodgeVisible:this.state.lodgeVisible,onCreate:this.handleSubmit,onCancel:this.handleCancel,lodgeData:this.state.lodgeData}),r.a.createElement(Pe,{visible:this.state.volunteerInfoVisible,volunteerInfo:this.state.volunteerInfo,onCancel:this.closeVolunteerModal,onOk:this.closeVolunteerModal}),r.a.createElement(_e,{visible:this.state.deleteModalVisible,reqID:this.state.deleteReqID,username:this.props.user.username,isAirpick:!1,closeModal:this.closeDeleteModal})))}}]),t}(r.a.Component))||Ye,Ze=Object(c.b)((function(e){return e}),{addPickreq:function(e){var t=e.username,a=w(e);return function(e){return p.a.post("/api/requests/user/".concat(t),a).then((function(t){0===t.data.code?(m.a.success(t.data.msg),e({type:"ADD_SUC",payload:t.data.data})):m.a.error(t.data.msg)}))}},loadPickreq:D,addLodgereq:function(e){var t=e.username,a=S(e);return function(e){return p.a.post("/api/lodgeRequests/lodge/".concat(t),a).then((function(t){0===t.data.code?(m.a.success(t.data.msg),e({type:"ADD_LODGE_SUC",payload:t.data.data})):m.a.error(t.data.msg)}))}},loadLodgereq:R})(Me=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.showLodgeModal=function(){a.setState({lodgeVisible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.lodgeHandleCancel=function(){a.setState({lodgeVisible:!1})},a.handleSubmit=function(e){a.setState({visible:!1});var t=Object(h.a)({},e,{publish:!0,notes:e.notes?e.notes:"",date:e.date.format("YYYY-MM-DD"),time:e.time.format("HH:mm"),username:a.props.user.username});a.props.addPickreq(t)},a.lodgeHandleSubmit=function(e){a.setState({lodgeVisible:!1});var t=Object(h.a)({},e,{publish:!0,notes:e.notes?e.notes:"",startDate:e.startDate.format("YYYY-MM-DD"),leaveDate:e.leaveDate.format("YYYY-MM-DD"),username:a.props.user.username});a.props.addLodgereq(t)},a.saveForm=function(e){a.formRef=e},a.state={visible:!1,confirmLoading:!1,myReq:void 0,lodgeVisible:!1},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.loadPickreq(this.props.user.username),this.props.loadLodgereq(this.props.user.username)}},{key:"render",value:function(){var e=this.props.airpick.myRequests,t=this.props.lodge.lodgeRequests;return r.a.createElement("div",{style:{textAlign:"center"}},e?r.a.createElement(We,{data:e}):null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ee.a,{type:"primary",onClick:this.showModal},r.a.createElement(ge.a,null),"Add Airpick Request"),r.a.createElement(we,{wrappedComponentRef:this.saveForm,visible:this.state.visible,onCreate:this.handleSubmit,onCancel:this.handleCancel}),r.a.createElement("br",null),r.a.createElement("br",null)),t?r.a.createElement(Xe,{lodgeData:t}):null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ee.a,{type:"primary",onClick:this.showLodgeModal},r.a.createElement(ge.a,null),"Add Lodging Request"),r.a.createElement(je,{wrappedComponentRef:this.saveForm,visible:this.state.lodgeVisible,onCreate:this.lodgeHandleSubmit,onCancel:this.lodgeHandleCancel}),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),t}(r.a.Component))||Me,Ke=ne.a.Title,et=Object(c.b)((function(e){return e}))(Fe=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).onCollapse=function(e){a.setState({collapsed:e})},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return r.a.createElement(ne.a,{style:{padding:"15px"}},r.a.createElement(Ke,{level:3,style:{textAlign:"center"}},"My Request Center"),r.a.createElement(Ee.a,null),r.a.createElement(Ze,null))}}]),t}(r.a.Component))||Fe,tt=(a(135),a(84)),at=(a(137),a(7)),nt=a(464),rt=function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(nt.a,{style:{fontSize:35}}),r.a.createElement("p",null,"No Request yet"))},lt=Ie.a.Column,it=Object(c.b)((function(e){return e}),{loadAllReq:function(){return function(e){return p.a.get("/api/requests/list").then((function(t){200===t.status&&0===t.data.code?(t.data.reqList.sort((function(e,t){return new Date(e.request.arrivalTime).getTime()-new Date(t.request.arrivalTime).getTime()})),e({type:"LOAD_ALL",msg:"Get list success",payload:t.data.reqList})):e(C("Error happened when getting the request list"))}))}},acceptReq:function(e,t,a){var n=a.filter((function(t){return t.request._id!==e}));return function(a){return p.a.post("/api/requests/request/".concat(e),{volunteer:t}).then((function(e){200===e.status?a(function(e,t){return{type:"ACCEPT_REQ_SUC",msg:e,payload:t}}(e.data.msg,n)):a(C(e.data.msg))}))}}})(Ve=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).handleAccept=function(e){var t=e._id,n=a.props.user.username;a.props.acceptReq(t,n,a.props.airpick.list).then((function(){m.a.success(a.props.airpick.msg,1)}))},a.state={loading:!0},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loadAllReq().then((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(at.b,{renderEmpty:rt},r.a.createElement(Ie.a,{dataSource:this.props.airpick.list,loading:this.state.loading,pagination:{hideOnSinglePage:!0,showQuickJumper:!0},tableLayout:"fixed"},r.a.createElement(lt,{title:"Accept",key:"accept",render:function(t,a){return e.props.user.username===a.request.username?r.a.createElement(ee.a,{type:"ghost",size:"small",disabled:!0},"Accept"):r.a.createElement(ee.a,{type:"primary",size:"small",onClick:function(){return e.handleAccept(a.request)}},"Accept")}}),r.a.createElement(lt,{title:"Name",dataIndex:["user","displayName"],key:"name"}),r.a.createElement(lt,{title:"Time",key:"time",render:function(e,t){return O()(t.request.arrivalTime).tz("America/New_York").format("ddd, MMM Do YYYY HH:mm")}}),r.a.createElement(lt,{title:"Airport/Address",dataIndex:["request","airport"],key:"airport"}),r.a.createElement(lt,{title:"Luggage",dataIndex:["request","luggage"],key:"luggage"}),r.a.createElement(lt,{title:"Carryon",dataIndex:["request","carryon"],key:"carryon"}),r.a.createElement(lt,{title:"Notes",dataIndex:["request","notes"],key:"notes"}))))}}]),t}(r.a.Component))||Ve,st=ne.a.Title,ot=ne.a.Paragraph,ct=function(e){function t(){return Object(F.a)(this,t),Object(U.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ne.a,{style:{padding:"15px"}},r.a.createElement(st,{level:3,style:{textAlign:"center"}},"Airport Pickup Requests"),r.a.createElement(ot,{style:{textAlign:"center"}},r.a.createElement(tt.a,{color:"red"},"Note:"),"This page lists all the airport pick-up requests. To accept one, simply click the 'Accept' button on the left of that request."),r.a.createElement(Ee.a,null),r.a.createElement(it,null)))}}]),t}(r.a.Component),ut=Ie.a.Column,mt=Object(c.b)((function(e){return e}),{loadAllReq:function(){return function(e){return p.a.get("/api/lodgeRequests/lodge/list").then((function(t){200===t.status&&0===t.data.code?(t.data.reqList.sort((function(e,t){return new Date(e.request.createdAt).getTime()-new Date(t.request.createdAt).getTime()})),e({type:"LOAD_LODGE_ALL",msg:"Get list success",payload:t.data.reqList})):e(A("Error happened when getting the request list"))}))}},acceptReq:function(e,t,a){var n=a.filter((function(t){return t.request._id!==e}));return function(a){return p.a.post("/api/lodgeRequests/request/lodge/".concat(e),{volunteer:t}).then((function(e){200===e.status?a(function(e,t){return{type:"ACCEPT_LODGE_REQ_SUC",msg:e,payload:t}}(e.data.msg,n)):a(A(e.data.msg))}))}}})(Ue=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).handleAccept=function(e){var t=e._id,n=a.props.user.username;a.props.acceptReq(t,n,a.props.lodge.list).then((function(){m.a.success(a.props.airpick.msg,1)}))},a.state={loading:!0},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loadAllReq().then((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(at.b,{renderEmpty:rt},r.a.createElement(Ie.a,{dataSource:this.props.lodge.list,loading:this.state.loading,pagination:{hideOnSinglePage:!0,showQuickJumper:!0},tableLayout:"fixed"},r.a.createElement(ut,{title:"Accept",key:"accept",render:function(t,a){return e.props.user.username===a.request.username?r.a.createElement(ee.a,{type:"ghost",size:"small",disabled:!0},"Accept"):r.a.createElement(ee.a,{type:"primary",size:"small",onClick:function(){return e.handleAccept(a.request)}},"Accept")}}),r.a.createElement(ut,{title:"Name",dataIndex:["user","displayName"],key:"name"}),r.a.createElement(ut,{title:"Pickup Location",dataIndex:["request","pickupLocation"],key:"pickupLocation"}),r.a.createElement(ut,{title:"Start date",key:"stateDate",render:function(e,t){return O()(t.request.startDate).tz("America/New_York").format("ddd, MMM Do YYYY")}}),r.a.createElement(ut,{title:"Leave date",key:"leaveDate",render:function(e,t){return O()(t.request.leaveDate).tz("America/New_York").format("ddd, MMM Do YYYY")}}),r.a.createElement(ut,{title:"Notes",key:"nontes",dataIndex:["request","notes"]}))))}}]),t}(r.a.Component))||Ue,dt=ne.a.Title,pt=ne.a.Paragraph,ft=function(e){function t(){return Object(F.a)(this,t),Object(U.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ne.a,{style:{padding:"15px"}},r.a.createElement(dt,{level:3,style:{textAlign:"center"}},"Lodge Requests"),r.a.createElement(pt,{style:{textAlign:"center"}},r.a.createElement(tt.a,{color:"red"},"Note:"),"This page lists all the Lodge requests. To accept one, simply click the 'Accept' button on the left of that request."),r.a.createElement(Ee.a,null),r.a.createElement(mt,null)))}}]),t}(r.a.Component),ht=a(66),Et=function(e){var t=e.visible,a=e.reqType,n=e.reqId,l=e.changeVsb,i=e.volunteerId,s=Object(c.c)();return r.a.createElement("div",null,n?r.a.createElement(W.a,{visible:t,title:"Confirm cancelling request",onOk:function(){"airpick"==a?s(function(e,t){return function(a){return p.a.put("/api/requests/cancel/".concat(e)).then((function(e){if(1!==e.data.code)return e;a(C(e.data.msg))})).then((function(){return a(q(t))}))}}(n,i)).then((function(){m.a.success("Cancel successfully",1)})):"lodge"==a&&s(function(e,t){return function(a){return p.a.put("/api/lodgeRequests/cancel2/".concat(e)).then((function(e){if(1!==e.data.code)return e;a(A(e.data.msg))})).then((function(){return a(Y(t))}))}}(n,i)).then((function(){m.a.success("Cancel successfully",1)})),l(!1)},onCancel:function(){l(!1)}},r.a.createElement("h3",null,"Are you sure you want to cancel this request?"),"The requester will be notified by email, but we strongly encourage you to notify the requester via wechat or phone."):null)},gt=Ie.a.Column,bt=function(){var e={fontSize:16},t=[0,5],a=Object(n.useState)({visible:!1}),l=Object(ht.a)(a,2),i=l[0],s=l[1],o=Object(n.useState)({visible:!1}),u=Object(ht.a)(o,2),m=u[0],d=u[1],p=Object(c.d)((function(e){return e.user})),f=Object(c.d)((function(e){return e.airpick}));if(void 0===f.acceptedAirPick)return null;var E=f.acceptedAirPick.map((function(e){return Object(h.a)({},e,{key:e.acceptedReq._id})}));return r.a.createElement("div",null,r.a.createElement(at.b,{renderEmpty:rt},r.a.createElement(Ie.a,{dataSource:E,loading:!E,pagination:{pageSize:5,hideOnSinglePage:!0,showQuickJumper:!0},tableLayout:"fixed"},r.a.createElement(gt,{title:"Cancel",key:"cancel",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(ee.a,{type:"danger",size:"small",onClick:function(){d({reqType:"airpick",reqId:t.key,visible:!0,volunteerId:p.username})}},"cancel"))}}),r.a.createElement(gt,{title:"Name",dataIndex:["userInfo","firstName"]}),r.a.createElement(gt,{title:"Contact",key:"contact",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(ee.a,{type:"primary",size:"small",onClick:function(){return s({visible:!0,userInfo:t.userInfo})}},"Contact"))}}),r.a.createElement(gt,{title:"Time",key:"time",render:function(e,t){return ke()(t.acceptedReq.arrivalTime).tz("America/New_York").format("ddd, MMM Do YYYY HH:mm")}}),r.a.createElement(gt,{title:"Airport/Address",dataIndex:["acceptedReq","airport"],key:"airport"}),r.a.createElement(gt,{title:"Luggage",dataIndex:["acceptedReq","luggage"],key:"luggage"}),r.a.createElement(gt,{title:"Carryon",dataIndex:["acceptedReq","carryon"],key:"carryon"}),r.a.createElement(gt,{title:"Notes",dataIndex:["acceptedReq","notes"],key:"notes"}))),r.a.createElement(Et,{visible:m.visible,reqType:m.reqType,reqId:m.reqId,volunteerId:m.volunteerId,changeVsb:function(e){return d(Object(h.a)({},m,{visible:e}))}}),i.userInfo?r.a.createElement(W.a,{width:550,title:i.userInfo.firstName+"'s Contact Information",visible:i.visible,onOk:function(){s(Object(h.a)({},i,{visible:!1}))},onCancel:function(){s(Object(h.a)({},i,{visible:!1}))}},r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"Name"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.displayName)),r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"E-mail"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.email)),r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"Wechat"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.wechatId)),r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"US Phone"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.phone))):null)},yt=Ie.a.Column,vt=function(){var e={fontSize:16},t=[0,5],a=Object(n.useState)({visible:!1}),l=Object(ht.a)(a,2),i=l[0],s=l[1],o=Object(n.useState)({visible:!1}),u=Object(ht.a)(o,2),m=u[0],d=u[1],p=Object(c.d)((function(e){return e.user})),f=Object(c.d)((function(e){return e.lodge}));if(void 0===f.acceptedLodge)return null;var E=f.acceptedLodge.map((function(e){return Object(h.a)({},e,{key:e.acceptedReq._id})}));return r.a.createElement("div",null,r.a.createElement(at.b,{renderEmpty:rt},r.a.createElement(Ie.a,{dataSource:E,loading:!E,pagination:{pageSize:5,hideOnSinglePage:!0,showQuickJumper:!0},tableLayout:"fixed"},r.a.createElement(yt,{title:"Cancel",key:"cancel",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(ee.a,{type:"danger",size:"small",onClick:function(){d({reqId:t.key,reqType:"lodge",visible:!0,volunteerId:p.username})}},"cancel"))}}),r.a.createElement(yt,{title:"Name",dataIndex:["userInfo","firstName"]}),r.a.createElement(yt,{title:"Contact",key:"contact",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(ee.a,{type:"primary",size:"small",onClick:function(){return s({visible:!0,userInfo:t.userInfo})}},"Contact"))}}),r.a.createElement(yt,{title:"Pickup Location",key:"pickupLocation",dataIndex:["acceptedReq","pickupLocation"]}),r.a.createElement(yt,{title:"Start Date",key:"startDate",render:function(e,t){return ke()(t.acceptedReq.startDate).tz("America/New_York").format("ddd, MMM Do YYYY")}}),r.a.createElement(yt,{title:"Leave Date",key:"leaveDate",render:function(e,t){return ke()(t.acceptedReq.leaveDate).tz("America/New_York").format("ddd, MMM Do YYYY")}}),r.a.createElement(yt,{title:"Notes",dataIndex:["acceptedReq","notes"],key:"notes"}))),r.a.createElement(Et,{visible:m.visible,reqType:m.reqType,reqId:m.reqId,volunteerId:m.volunteerId,changeVsb:function(e){return d(Object(h.a)({},m,{visible:e}))}}),i.userInfo?r.a.createElement(W.a,{width:550,title:i.userInfo.firstName+"'s Contact Information",visible:i.visible,onOk:function(){s(Object(h.a)({},i,{visible:!1}))},onCancel:function(){s(Object(h.a)({},i,{visible:!1}))}},r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"Name"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.displayName)),r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"E-mail"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.email)),r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"Wechat"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.wechatId)),r.a.createElement(oe.a,{gutter:t},r.a.createElement(ue.a,{span:4,style:e},"US Phone"),r.a.createElement(ue.a,{span:14,style:e,offset:4},i.userInfo.phone))):null)},Ot=ne.a.Title,kt=ne.a.Paragraph,Ct=function(){var e=Object(c.d)((function(e){return e.user})),t=Object(c.c)();return Object(n.useEffect)((function(){e.username&&(t(q(e.username)),t(Y(e.username)))}),[t,e.username]),e?r.a.createElement(ne.a,{style:{padding:"15px"}},r.a.createElement(Ot,{level:3,style:{textAlign:"center"}},"Accepted Requests"),r.a.createElement(kt,{style:{textAlign:"center",fontSize:14}},r.a.createElement(tt.a,{color:"red"},"Note:"),"Thank you for being a volunteer, ",e.firstName,"!",r.a.createElement("br",null),"Here is the list of requests you accepted. We strongly suggest adding the new student as a WeChat friend to communicate about any possible changes."),r.a.createElement(Ee.a,null),r.a.createElement(bt,null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(vt,null)):null},wt=ne.a.Title,Dt=Object(c.b)((function(e){return e}))(ze=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).onCollapse=function(e){a.setState({collapsed:e})},a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return r.a.createElement(ne.a,{style:{padding:"15px"}},r.a.createElement(wt,{level:3,style:{textAlign:"center"}},"Student Guide"),r.a.createElement(Ee.a,null),r.a.createElement("div",null,r.a.createElement("embed",{src:a(443),width:"100%",height:"1000px"})))}}]),t}(r.a.Component))||ze;function jt(){var e=Object(c.d)((function(e){return e.user})),t=Object(H.g)(),a=te.a.useForm(),n=Object(ht.a)(a,1)[0];return r.a.createElement("div",null,r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:18},sm:{span:8}},wrapperCol:{xs:{span:18},sm:{span:10}}},{form:n,name:"editPassword",onFinish:function(a){p.a.put("/api/user/editpassword",{username:e.username,newPassword:a.newPass,oldPassword:a.oldPass}).then((function(e){0===e.data.code?(m.a.success("Update password successfully!"),t.push("/myrequestcenter")):m.a.error(e.data.msg)})).catch()},onFinishFailed:function(e){n.scrollToField(e.errorFields[0].name)}}),r.a.createElement(te.a.Item,{name:"oldPass",label:"Old Password",rules:[{required:!0,message:"Please input your old password"}]},r.a.createElement(ae.a.Password,null)),r.a.createElement(te.a.Item,{name:"newPass",label:"New Password",rules:[{required:!0,message:"Please input your old password"}],hasFeedback:!0},r.a.createElement(ae.a.Password,null)),r.a.createElement(te.a.Item,{name:"confirmNewPass",label:"Confirm New Password",dependencies:["newPass"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your new password"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newPass")!==a?Promise.reject("Two paswords you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(ae.a.Password,null)),r.a.createElement(te.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(ee.a,{type:"primary",htmlType:"submit"},"Update"))))}var qt,It,At=ne.a,St=function(){return r.a.createElement("div",null,r.a.createElement(At,{className:"title-middle"},r.a.createElement("h3",null,"Edit Profile")),r.a.createElement(jt,null))},Rt=function(e){var t=e.isAuth,a=e.component,n=Object(f.a)(e,["isAuth","component"]),l=["/","/login","/register"];return r.a.createElement(H.b,Object.assign({},n,{render:function(e){return void 0===t?null:t?r.a.createElement(a,e):-1===l.indexOf(e.location.pathname)?r.a.createElement(H.a,{to:"/login"}):null}}))},Nt=function(){var e=Object(c.d)((function(e){return e.user})),t=Object(c.c)(),a=te.a.useForm(),l=Object(ht.a)(a,1)[0];Object(n.useEffect)((function(){l.setFieldsValue({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,username:e.username})}),[t,l,e.email,e.firstName,e.lastName,e.phone,e.username]);return r.a.createElement(te.a,Object.assign({},{labelCol:{xs:{span:18},sm:{span:8}},wrapperCol:{xs:{span:18},sm:{span:10}}},{form:l,name:"editProfile",onFinish:function(a){var n=Object(h.a)({_id:e._id},a);t(function(e){if(!e.firstName||!e.lastName||!e.email)return b("missing Fields");var t=[e.firstName,e.lastName].join(" ");return e=Object(h.a)({},e,{displayName:t}),function(a){p.a.put("/api/user/editProfile",{userProfile:e}).then((function(e){if(200===e.status&&0===e.data.code){var n=e.data.data;a(y(Object(h.a)({},n,{displayName:t}))),m.a.success("Update Successfully!")}else m.a.error(e.data.msg)}))}}(n))},onFinishFailed:function(e){var t=e.errorfields;l.scrollToField(t)}}),r.a.createElement(te.a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,message:"Please input your first name!"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(re.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"First Name"})),r.a.createElement(te.a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,message:"Please input your Last name!"}]},r.a.createElement(ae.a,{prefix:r.a.createElement(re.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"LastName"})),r.a.createElement(te.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(ae.a,{placeholder:"Email"})),r.a.createElement(te.a.Item,{name:"phone",label:"US Phone Number",rules:[{validator:function(e,t){return t&&t.length&&!/^\d{10}$/.test(t)?Promise.reject("Invalid US Phone Number!"):Promise.resolve()}}]},r.a.createElement(ae.a,{type:"String",placeholder:"US Phone Number"})),r.a.createElement(te.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(ee.a,{type:"primary",htmlType:"submit"},"Update")))},xt=ne.a,Lt=function(){return r.a.createElement("div",null,r.a.createElement(xt,{className:"title-middle"},r.a.createElement("h3",null,"Edit Profile")),r.a.createElement(Nt,null))};function Pt(){return r.a.createElement("section",null,r.a.createElement("div",{className:"background"},r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("img",{src:a(444),alt:"CSA logo",className:"center"}),r.a.createElement("pre",{className:"highlight highlight-dark"},r.a.createElement("p",{className:"h1"},"Welcome to the Gator Nation!")),r.a.createElement("br",null),r.a.createElement("div",{className:"highlight single-step"},r.a.createElement("span",{className:"text-danger"},r.a.createElement("p",{className:"typewriter english"},"CSA would like to wish you all a pleasant trip. To ensure safe and efficient pick-ups for new students and our volunteers, we coordinate travel agendas here through the pick-up system. "),r.a.createElement("p",{className:"typewriter english"},"Please follow the registration and restrictions guidelines accordingly."))),r.a.createElement("br",null)),r.a.createElement("p",null),r.a.createElement("div",{className:"single-step"},r.a.createElement("span",{className:"text-danger"},r.a.createElement("p",{className:"english"},"Important announcement: CSA is a non-profit student organization under the UF Student Government. This application serves only as a platform for new international students to find a ride home. CSA never charges new students in any way shape or form. If you come across a volunteer that asks for a payment, please ",r.a.createElement("a",{href:"mailto:ufcsainfo@gmail.com"},"inform CSA")," immediately, or contact a CSA member to report the incident. "),r.a.createElement("p",{className:"chinese"},"\u91cd\u8981\u58f0\u660e\uff1aCSA\u4f5c\u4e3aUF\u5b66\u751f\u653f\u5e9c\u4e0b\u5c5e\u7684\u5b98\u65b9\u975e\u8425\u5229\u6027\u7ec4\u7ec7\uff0c\u672c\u63a5\u673a\u7cfb\u7edf\u7684\u4f5c\u7528\u4ec5\u9650\u4e8e\u63d0\u4f9b\u65b0\u540c\u5b66\u8054\u7cfb\u5fd7\u613f\u8005\u63a5\u673a\u7684\u5e73\u53f0\uff0c CSA\u4e0d\u4ee5\u4efb\u4f55\u5f62\u5f0f\u5411\u65b0\u540c\u5b66\u6536\u8d39\u3002\u5982\u9047\u5fd7\u613f\u8005\u6536\u8d39\u884c\u4e3a\uff0c\u8bf7\u53ca\u65f6\u4e0e\u6211\u4eec",r.a.createElement("a",{href:"mailto:ufcsainfo@gmail.com"},"\u8054\u7cfb"),"\u3002"))),r.a.createElement("br",null)),r.a.createElement("div",{className:"main_body"},r.a.createElement("div",{className:"body_detail"},r.a.createElement("p",{className:"bottom"},r.a.createElement("br",null),"\xa9 Copyright 2020 UFCSA Chinese Student",r.a.createElement("br",null),"Association at University of Florida",r.a.createElement("br",null),"\u4f5b\u7f57\u91cc\u8fbe\u5927\u5b66\u4e2d\u56fd\u5b66\u751f\u4f1a",r.a.createElement("br",null),"All Rights Reserved."))))}function Tt(){return r.a.createElement("p",null,"404 Not Found")}var _t=(qt=Object(c.b)((function(e){return e}),{loadData:y}),Object(H.h)(It=qt(It=function(e){function t(e){var a;Object(F.a)(this,t);var n=(a=Object(U.a)(this,Object(z.a)(t).call(this,e))).props.location.pathname;return-1===["/login","/register"].indexOf(n)&&p.a.get("/api/user/info").then((function(e){200===e.status&&(0===e.data.code?a.props.loadData(e.data.data):a.props.history.push("/login"))})),a}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.user.isAuth,t=[{path:"/",text:"UF CSA Airpick",component:Pt,className:"navbar-title",auth:!1,hide:!1}],a=[{path:"/myrequestcenter",text:"My Requests",className:"",hide:!e,component:et,auth:!0},{text:"Volunteer",hide:!e,subItem:[{path:"/airpicklist",text:"Airpick Requests",component:ct,auth:!0},{path:"/lodgelist",text:"Lodge Requests",component:ft,auth:!0},{path:"/accepted",text:"My Acception",component:Ct,auth:!0}]},{path:"/guide",text:"Guide",className:"",hide:!e,component:Dt,auth:!0}],n=[{path:"/register",text:"Register",component:he,className:"navbar-right header-nav",hide:e,auth:!1},{path:"/login",text:"Login",component:se,className:"navbar-right header-nav",hide:e,auth:!1},{text:"usercenter",hide:!e,className:"navbar-right header-nav",subItem:[{path:"/edit-profile",text:"Edit Profile",component:Lt,auth:!0},{path:"/change-password",text:"Change Password",component:St,auth:!0},{text:"Sign out",auth:!0}]}],l=[].concat(t,a,n);return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement(K,{data:t})),r.a.createElement("div",{className:"navbar-right header-nav"},r.a.createElement(K,{data:n})),r.a.createElement("div",{className:"navbar-left header-nav"},r.a.createElement(K,{data:a}))),r.a.createElement("div",{className:""},r.a.createElement(H.d,null,function(e,t){var a=[];return e.forEach((function(e){if("UF CSA Airpick"===e.text)a.push(r.a.createElement(H.b,{exact:!0,key:e.text,path:e.path,component:e.component}));else if("Volunteer"===e.text){e.subItem.forEach((function(e){a.push(r.a.createElement(Rt,{key:e.text,path:e.path,component:e.component,isAuth:t}))}))}else"usercenter"===e.text?e.subItem.forEach((function(e){"Sign out"!==e.text&&a.push(r.a.createElement(Rt,{key:e.text,path:e.path,component:e.component,isAuth:t}))})):e.auth?a.push(r.a.createElement(Rt,{key:e.text,path:e.path,component:e.component,isAuth:t})):a.push(r.a.createElement(H.b,{key:e.text,path:e.path,component:e.component}))})),a.push(r.a.createElement(H.b,{key:"nomatch",component:Tt})),a}(l,e))))}}]),t}(r.a.Component))||It)||It);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Yt=Object(s.e)(M,Object(s.d)(Object(s.a)(o.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));i.a.render(r.a.createElement(c.a,{store:Yt},r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement(_t,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[243,1,2]]]);
//# sourceMappingURL=main.ba8fdad5.chunk.js.map